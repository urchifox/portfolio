function l(t,n){return[...(n??document).querySelectorAll(t)]}function o(t){return t instanceof HTMLElement}function c(t){return o(t)&&t.tagName==="DETAILS"}function u(t){return o(t)&&t.tagName==="BUTTON"}var m={CLOSED:"\u0420\u0430\u0441\u043A\u0440\u044B\u0442\u044C \u0432\u0441\u0435",OPENED:"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u0432\u0441\u0435"},r={ANIMATING:"additions-card__content--animating",COLLAPSING:"additions-card__content--collapsing"},d=l(".additions-card__button"),a=new Map;for(let t of d){let n=t.parentNode;if(!o(n))continue;let e=l(".additions-card__summary",n);a.set(t,[...e])}var E=[...a.values()].flat(),T=t=>{if(!u(t.target))return;let e=t.target.textContent===m.CLOSED;t.target.textContent=e?m.OPENED:m.CLOSED,a.get(t.target)?.forEach(i=>{let s=i.parentElement;c(s)&&s.open!==e&&i.click()})},L=t=>{if(!o(t.target))return;let n=t.target.parentElement,e=t.target.nextElementSibling;if(!o(e)||!c(n))return;if(e.classList.contains(r.ANIMATING)){e.classList.remove(r.ANIMATING,r.COLLAPSING),t.target.offsetWidth;return}let i=s=>e.addEventListener("animationend",s,{once:!0});requestAnimationFrame(()=>e.classList.add(r.ANIMATING)),i(()=>e.classList.remove(r.ANIMATING)),n.open&&(t.preventDefault(),e.classList.add("additions-card__content--collapsing"),i(()=>{n.removeAttribute("open"),e.classList.remove("additions-card__content--collapsing")}))},H=()=>{d.forEach(t=>t.addEventListener("click",T)),E.forEach(t=>t.addEventListener("click",L))};export{H as init};
