var a="https://esm.run/dialog-polyfill",n=window.HTMLDialogElement===void 0,r=document.querySelectorAll("[data-modal-id]"),l=new Map,c=o=>{let e=o.target.closest("[data-modal-id]"),t=l.get(e);o.preventDefault(),t.showModal()},s=o=>{o.stopPropagation(),o.target.closest(".modal").close()},d=o=>{let e=o.currentTarget;o.target===e&&e.close()},i=o=>{let e=o.target.closest(".modal__picture-wrapper");e.parentNode.querySelector(".modal__spinner").remove(),e.className+=" modal__picture-wrapper--loaded"},p=()=>{n&&document.querySelectorAll("dialog").forEach(async e=>{let{default:t}=await import(a);t.registerDialog(e)}),r.forEach(o=>{let e=document.querySelector(`#${o.dataset.modalId}`);l.set(o,e),o.addEventListener("click",c),e.querySelector(".modal__picture").addEventListener("load",i),e.addEventListener("click",d),e.querySelector(".modal__button").addEventListener("click",s)})};export{p as init};
