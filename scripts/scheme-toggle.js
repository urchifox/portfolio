function c(e,t){let n=(t??document).querySelector(e);if(!n)throw Error(`Element "${e}" not found`);if(!(n instanceof HTMLElement))throw Error(`Element "${e}" is not an HTMLElement`);return n}function l(e,t){return[...(t??document).querySelectorAll(e)]}function a(e){return e instanceof HTMLElement}function m(e){return a(e)&&e.tagName==="INPUT"}var i=l("link[rel=stylesheet][media*=prefers-color-scheme][media*=light]"),h=l("link[rel=stylesheet][media*=prefers-color-scheme][media*=dark]"),u=matchMedia("(prefers-color-scheme: dark)"),r=c(".scheme-toggle__control"),d={dark:"dark",light:"light"},E=()=>u.matches?"dark":"light",S=()=>localStorage.getItem("color-scheme-local"),g=()=>localStorage.getItem("color-scheme-system"),T=e=>{localStorage.setItem("color-scheme-local",e)},p=e=>{localStorage.setItem("color-scheme-system",e)},H=()=>{localStorage.removeItem("color-scheme-local")},s=e=>{let t=e==="light"?"all":"not all",n=e==="dark"?"all":"not all";[...i].forEach(o=>{o.media=t}),[...h].forEach(o=>{o.media=n})},M=e=>{if(!m(e.target))return;let t=e.target.checked?"dark":"light";T(t),s(t)},f=()=>{let e=S(),t=g(),n=E();t!==n&&(p(n),H());let o=e!==null&&Object.keys(d).includes(e)?e:n;s(o),r.checked=(e??n)==="dark",r.addEventListener("click",M)};export{f as init};
