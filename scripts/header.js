var m=e=>{let t=e.getBoundingClientRect(),n=window.innerHeight/2;return t.top<=n&&t.bottom>=n},u=()=>document.documentElement.scrollTop<10,d=()=>{let e=document.documentElement.scrollTop;return document.body.scrollHeight-window.innerHeight-e<10};function l(e,t){let n=(t??document).querySelector(e);if(!n)throw Error(`Element "${e}" not found`);if(!(n instanceof HTMLElement))throw Error(`Element "${e}" is not an HTMLElement`);return n}function a(e,t){return[...(t??document).querySelectorAll(e)]}var i=l(".header"),E=l(".header__menu-toggle",i),c=l(".header__scroll-indicator",i),g=a(".header__menu-link",i),o=new Map;g.forEach(e=>{let t=e.href.substring(e.href.indexOf("#")),n=document.querySelector(t);o.set(n,e)});var r=o.keys().next().value,T=()=>{let e=i?.clientHeight??0;document.documentElement.style.setProperty("--header-height",`${e}px`)},f=()=>{window.innerWidth<760&&(E.checked=!1)},p=e=>{e.offsetY>i.offsetHeight&&(E.checked=!1)},s=e=>{o.get(r).classList.remove("header__menu-link--current"),r=e;let t=o.get(r);if(t.classList.add("header__menu-link--current"),window.innerWidth>=760){let n=t.getBoundingClientRect();c.style.left=`${n.x}px`,c.style.width=`${n.width}px`}},h=()=>{let e=document.documentElement.scrollTop,t=document.body.scrollHeight-window.innerHeight,n=e/t*100;c.style.setProperty("--scroll-percent",`${n}%`)},H=()=>{if(window.innerWidth<760&&h(),u()){s(o.keys().next().value);return}if(d()){s([...o.keys()].at(-1));return}if(!m(r)){for(let[e]of o)if(m(e)){s(e);return}}},L=()=>{if(T(),window.innerWidth<760){c.style="",h();return}s(r)},k=()=>{T(),s(r),g.forEach(e=>e.addEventListener("click",f)),i.addEventListener("click",p),window.addEventListener("scroll",H),window.addEventListener("resize",L)};export{k as init};
