var l=e=>{let t=e.getBoundingClientRect(),n=window.innerHeight/2;return t.top<=n&&t.bottom>=n},d=()=>document.documentElement.scrollTop<10,u=()=>{let e=document.documentElement.scrollTop;return document.body.scrollHeight-window.innerHeight-e<10};var i=document.querySelector(".header"),a=i.querySelector(".header__menu-toggle"),s=i.querySelector(".header__scroll-indicator"),h=i.querySelectorAll(".header__menu-link"),o=new Map;h.forEach(e=>{let t=e.href.substring(e.href.indexOf("#")),n=document.querySelector(t);o.set(n,e)});var r=o.keys().next().value,g=()=>{let e=i.clientHeight;document.documentElement.style.setProperty("--header-height",`${e}px`)},p=()=>{window.innerWidth<760&&(a.checked=!1)},f=e=>{e.offsetY>i.offsetHeight&&(a.checked=!1)},c=e=>{o.get(r).classList.remove("header__menu-link--current"),r=e;let t=o.get(r);if(t.classList.add("header__menu-link--current"),window.innerWidth>=760){let n=t.getBoundingClientRect();s.style.left=`${n.x}px`,s.style.width=`${n.width}px`}},m=()=>{let e=document.documentElement.scrollTop,t=document.body.scrollHeight-window.innerHeight,n=e/t*100;s.style.setProperty("--scroll-percent",`${n}%`)},w=()=>{if(window.innerWidth<760&&m(),d()){c(o.keys().next().value);return}if(u()){c([...o.keys()].at(-1));return}if(!l(r)){for(let[e]of o)if(l(e)){c(e);return}}},y=()=>{if(g(),window.innerWidth<760){s.style="",m();return}c(r)},T=()=>{g(),c(r),h.forEach(e=>e.addEventListener("click",p)),i.addEventListener("click",f),window.addEventListener("scroll",w),window.addEventListener("resize",y)};export{T as init};
